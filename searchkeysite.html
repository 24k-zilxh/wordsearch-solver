<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Search Program</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js"></script>
    <link rel="stylesheet" href="wordsearcher.css">
  
</head>
<body onload="brython()">
    <div class="container">
        <h1>Word Search Program</h1>
        <div class="input-group">
            <label for="rows">How many rows?</label>
            <input type="number" id="rows" required>
        </div>
        <div class="input-group">
            <label for="cols">How many columns?</label>
            <input type="number" id="cols" required>
        </div>
        <button class="button" id="createGridBtn">Create Grid</button>
        <button class="button" id="resetBtn">Stop & Reset</button>
        <div id="word-search"></div>
        <div class="input-group">
            <label for="letter">Enter letters for the next row (without spaces):</label>
            <input type="text" id="letter" required>
        </div>
        <button class="button" id="addRowBtn">Add Row</button>
        <div class="input-group">
            <label for="query">What word would you like to find?</label>
            <input type="text" id="query" required>
        </div>
        <button class="button" id="findWordBtn">Find Word</button>
        <p id="result"></p>
    </div>

    <script type="text/python">
        from browser import document, alert

        search = []

        def createGrid(event):
            document["word-search"].innerHTML = ""  # Clear previous grid
            search.clear()  # Clear previous data

        def reset(event):
            document["word-search"].innerHTML = ""  # Clear the grid display
            document["rows"].value = ""
            document["cols"].value = ""
            document["letter"].value = ""
            document["query"].value = ""
            document["result"].innerHTML = ""
            search.clear()  # Clear previous data

        def addRow(event):
            cols = int(document["cols"].value)
            row_data = list(document["letter"].value.lower())
            if len(row_data) != cols:
                alert(f"Please enter exactly {cols} letters for the row.")
                return
            search.append(row_data)
            document["word-search"].innerHTML += "<div>" + "".join([f"<span>{letter}</span>" for letter in row_data]) + "</div>"

        def findWord(event):
            query = document["query"].value.lower()
            query_list = list(query)
            first_char = query_list[0]

            def get_2d_coords(lst, tgt):
                coords = []
                for x in range(len(lst)):
                    for p in range(len(lst[x])):
                        if tgt == lst[x][p]:
                            coords.append((x, p))
                return coords

            startpoints = get_2d_coords(search, first_char)

            def up(tup, i):
                if tup[0] - i < 0:
                    return None
                return search[tup[0] - i][tup[1]]

            def down(tup, i):
                if tup[0] + i >= len(search):
                    return None
                return search[tup[0] + i][tup[1]]

            def left(tup, i):
                if tup[1] - i < 0:
                    return None
                return search[tup[0]][tup[1] - i]

            def right(tup, i):
                if tup[1] + i >= len(search[0]):
                    return None
                return search[tup[0]][tup[1] + i]

            def updiagl(tup, i):
                if tup[1] - i < 0 or tup[0] - i < 0:
                    return None
                return search[tup[0] - i][tup[1] - i]

            def updiagr(tup, i):
                if tup[1] + i >= len(search[0]) or tup[0] - i < 0:
                    return None
                return search[tup[0] - i][tup[1] + i]

            def downdiagr(tup, i):
                if tup[1] + i >= len(search[0]) or tup[0] + i >= len(search):
                    return None
                return search[tup[0] + i][tup[1] + i]

            def downdiagl(tup, i):
                if tup[1] - i < 0 or tup[0] + i >= len(search):
                    return None
                return search[tup[0] + i][tup[1] - i]

            for start in startpoints:
                trails = [[] for _ in range(8)]
                for trail in trails:
                    trail.append(first_char)

                for y in range(1, len(query_list)):
                    trails[0].append(up(start, y))
                    trails[1].append(down(start, y))
                    trails[2].append(left(start, y))
                    trails[3].append(right(start, y))
                    trails[4].append(updiagl(start, y))
                    trails[5].append(updiagr(start, y))
                    trails[6].append(downdiagl(start, y))
                    trails[7].append(downdiagr(start, y))

                for trail in trails:
                    if trail == query_list:
                        direction = trails.index(trail)
                        directions = ["upward", "downward", "left", "right", "up-left", "up-right", "down-left", "down-right"]
                        document["result"].innerHTML = f"Word found in the {directions[direction]} direction!"
                        highlightWord(start, direction, len(query_list))
                        return

            document["result"].innerHTML = "Word not found."

        def highlightWord(start, direction, length):
            x, y = start
            dx, dy = {
                0: (-1, 0), 1: (1, 0), 2: (0, -1), 3: (0, 1),
                4: (-1, -1), 5: (-1, 1), 6: (1, -1), 7: (1, 1)
            }[direction]

            for i in range(length):
                document["word-search"].select("div")[x].select("span")[y].classList.add("highlight")
                x += dx
                y += dy

        document["createGridBtn"].bind("click", createGrid)
        document["resetBtn"].bind("click", reset)
        document["addRowBtn"].bind("click", addRow)
        document["findWordBtn"].bind("click", findWord)
    </script>
    <script>
    // Made By CircuitCipher9261
    // Python by 24k-zilxh
    </script>
</body>
</html>
